function initPage() {
  $("body").hasClass("d-touch") ||
    ((jsScroller.target = document.querySelector(".js-scroller")),
    (jsScrollerHeight = $(".js-scroller").height()),
    $("body").css("height", jsScrollerHeight),
    jsScroller.addItems(),
    jsScroller._update(),
    sCursorLoadHide(),
    sCursorReset()),
    $("body").removeClass("is-loading");
}
function initCase() {
  function e() {
    (catActive = $(".p-current").attr("data-category")),
      $(".s-header .c-back span:first").text(catActive),
      tl.to($(".s-header .c-back"), 1, { opacity: 1 });
  }
  $("body").hasClass("d-touch") ||
    ((jsScroller.target = document.querySelector(".js-scroller")),
    (jsScrollerHeight = $(".js-scroller").height()),
    $("body").css("height", jsScrollerHeight),
    jsScroller.addItems(),
    jsScroller._update());
  var s = $(".p-current .s-hero").offset().top;
  $("html,body").scrollTop(s),
    $(".s-header .c-back").css("visibility", "visible"),
    tl.to($(".s-header .c-back"), 1, { opacity: 0, onComplete: e }),
    setTimeout(function () {
      if ($(".s-prev").length) {
        var e = $(".p-prev a").attr("href");
        $(".s-prev .c-top").on("inview", function (s, a) {
          if (a) {
            sCursorLoad();
            var t = $(".p-prev .s-hero").html();
            $(".s-placeholder").css("display", "block"),
              $(".s-placeholder .s-hero").append(t),
              $(".s-placeholder").css("display", "block"),
              tl.to($(".s-placeholder .c-image"), 0.2, {
                scaleX: 1,
                scaleY: 1,
                ease: Quint.easeOut,
              }),
              Barba.Pjax.goTo(e);
          }
        });
      }
      if ($(".s-next").length) {
        var s = $(".p-next a").attr("href");
        $(".s-next .c-bottom").on("inview", function (e, a) {
          if (a) {
            sCursorLoad();
            var t = $(".p-next .s-hero").html();
            $(".s-placeholder").css("display", "block"),
              $(".s-placeholder .s-hero").append(t),
              $(".s-placeholder").css("display", "block"),
              tl.to($(".s-placeholder .c-image"), 0.2, {
                scaleX: 1,
                scaleY: 1,
                ease: Quint.easeOut,
              }),
              Barba.Pjax.goTo(s);
          }
        });
      }
      if ($(".s-prev-category").length) {
        var a = $(".p-prev-category a").attr("href");
        $(".s-prev-category .c-top").on("inview", function (e, s) {
          function t() {
            tl.to($(".p-prev-category .s-panel"), 0.75, {
              y: r,
              ease: Quint.easeOut,
            }),
              tl.to($(".p-prev-category .s-panel a"), 0.75, {
                y: -r / 2,
                ease: Quint.easeOut,
                onComplete: o,
              });
          }
          function o() {
            sCursorLoad(), Barba.Pjax.goTo(a);
          }
          if (s) {
            var r = $(window).height(),
              n = $(".p-prev-category .s-panel a").height() / 2;
            $(".c-top").remove(),
              $(".p-prev-category").css("z-index", "15"),
              tl.to($(".p-prev-category"), 0.75, { y: 0, ease: Quint.easeOut }),
              tl.to($(".p-prev-category .s-panel a"), 0.75, {
                y: r / 2 - n,
                ease: Quint.easeOut,
                onComplete: t,
              });
          }
        });
      }
      if ($(".s-next-category").length) {
        var t = $(".p-next-category a").attr("href");
        $(".s-next-category .c-bottom").on("inview", function (e, s) {
          function a() {
            tl.to($(".p-next-category .s-panel"), 0.75, {
              y: -r,
              ease: Quint.easeOut,
            }),
              tl.to($(".p-next-category .s-panel a"), 0.75, {
                y: r,
                ease: Quint.easeOut,
                onComplete: o,
              });
          }
          function o() {
            sCursorLoad(), Barba.Pjax.goTo(t);
          }
          if (s) {
            var r = $(window).height(),
              n = $(".p-next-category .s-panel a").height() / 2;
            $(".c-bottom").remove(),
              $(".p-next-category").css("z-index", "15"),
              tl.to($(".p-next-category"), 0.75, { y: 0, ease: Quint.easeOut }),
              tl.to($(".p-next-category .s-panel a"), 0.75, {
                y: r / 2 - n,
                ease: Quint.easeOut,
                onComplete: a,
              });
          }
        });
      }
      $("body").removeClass("is-loading"), sCursorLoadHide(), sCursorReset();
    }, 1e3);
}
if (!$("body").hasClass("d-touch")) {
  var jsScroller = new SmoothScroll({
    target: document.querySelector(".js-scroller"),
    scrollEase: 0.1,
  });
  $(".js-scroller").imagesLoaded(function () {
    (jsScrollerHeight = $(".js-scroller").height()),
      $("body").css("height", jsScrollerHeight);
  });
}
var Work = Barba.BaseView.extend({
  namespace: "page-work",
  onEnterCompleted: function () {
    $("html").hasClass("a-loader") &&
      ($("body").hasClass("d-mobile") || sWork()),
      $("html").hasClass("a-nav-work") &&
        ($("body").hasClass("d-mobile") || sWork()),
      $("html").hasClass("a-case-work") &&
        ($("body").hasClass("d-mobile") || sWork()),
      $("body").hasClass("d-mobile") && mWork(),
      $(".p-work").imagesLoaded(function () {
        initPage(), $("html").removeAttr("class");
      });
  },
});
Work.init();
var Case = Barba.BaseView.extend({
  namespace: "page-case",
  onEnterCompleted: function () {
    $(".p-case").imagesLoaded(function () {
      $(".s-fullscreen").length &&
        ($("body").hasClass("d-mobile") || sFullscreen()),
        $(".s-hero").length && sHero(),
        $(".s-grid").length && ($("body").hasClass("d-mobile") || sGrid()),
        $(".s-image").length && ($("body").hasClass("d-mobile") || sImage()),
        $(".s-cinegraph").length && sCinegraph(),
        $(".s-dragger").length &&
          ($("body").hasClass("d-mobile") || sDragger()),
        $(".s-split").length && ($("body").hasClass("d-mobile") || sSplit()),
        $(".s-tiles").length && ($("body").hasClass("d-mobile") || sTiles()),
        $(".s-video").length && ($("body").hasClass("d-mobile") || sVideo()),
        $(".s-prev").length && sPrevCase(),
        $(".s-next").length && sNextCase(),
        $(".s-prev-category").length && sPrevCategory(),
        $(".s-next-category").length && sNextCategory(),
        initCase(),
        $("body").hasClass("d-mobile") && mCase();
    });
  },
});
Case.init();
var About = Barba.BaseView.extend({
  namespace: "page-about",
  onEnterCompleted: function () {
    $(".p-about").imagesLoaded(function () {
      pAbout(),
        sHero(),
        sHeroVideo(),
        sLogos(),
        sInstagram(),
        initPage(),
        $("html").removeAttr("class");
    });
  },
});
About.init();
var Overview = Barba.BaseView.extend({
  namespace: "page-overview",
  onEnterCompleted: function () {
    $(".p-overview").imagesLoaded(function () {
      pOverview(),
        sSidenav(),
        sFullscreen(),
        initPage(),
        $("html").removeAttr("class"),
        $("body").removeClass("is-loading");
    });
  },
});
Overview.init();
var Video = Barba.BaseView.extend({
  namespace: "page-video",
  onEnterCompleted: function () {
    $(".p-video").imagesLoaded(function () {
      pVideo(), sSidenav(), initPage(), $("html").removeAttr("class");
    });
  },
});
Video.init(),
  Barba.Pjax.start(),
  (Barba.Pjax.getTransition = function () {
    return $("html").hasClass("a-loader")
      ? LoaderTransition
      : $("html").hasClass("a-work-case-mobile")
      ? WorkCaseMobile
      : HideShowTransition;
  });
var LoaderTransition = Barba.BaseTransition.extend({
    start: function () {
      function e() {
        $("body").addClass("is-loading"),
          s.newContainerLoading.then(s.animIn.bind(s));
      }
      var s = this;
      $(this.oldContainer).addClass("s-page-old"),
        $(".s-loader").css("display", "block").addClass("is-black");
      var a = $(window).height();
      tl.set($(".s-loader .c-text .c-align"), { y: -a }),
        tl.set($(".s-loader .c-text .c-head"), { opacity: 1 }),
        tl.set($(".s-loader .c-text .c-sub"), { opacity: 1 }),
        tl.to($(".s-loader .c-text .c-align"), 1, {
          y: 0,
          ease: Power3.easeOut,
          delay: 0.25,
        }),
        tl.to($(".s-loader .c-text"), 1, {
          yPercent: 0,
          ease: Power3.easeOut,
          delay: 0.25,
          onComplete: e,
        });
    },
    animIn: function () {
      var e = this,
        s = $(this.newContainer);
      $(s).addClass("s-page-new"),
        sNavHide(),
        sNavActive(),
        $(window).scrollTop(0),
        setTimeout(function () {
          var s = $(window).height();
          tl.to($(".s-loader .c-text .c-align"), 1, {
            y: s,
            ease: Power3.easeOut,
          }),
            tl.to($(".s-loader .c-text"), 1, {
              yPercent: -100,
              ease: Power3.easeOut,
              onComplete: sLoaderReset,
            }),
            $(".s-page").removeClass("s-page-new"),
            $("body").removeClass("is-loading"),
            $("html").css("pointer-events", ""),
            e.done();
        }, 1e3);
    },
  }),
  HideShowTransition = Barba.BaseTransition.extend({
    start: function () {
      $("body").addClass("is-loading"),
        this.newContainerLoading.then(this.finish.bind(this));
    },
    finish: function () {
      $(window).scrollTop(0), sNavHide(), sNavActive();
      var e = $(".p-next-category");
      e.length || $(".s-next-category").remove(),
        this.done(),
        setTimeout(function () {
          $(".s-placeholder").css("display", "none"),
            $(".s-placeholder .s-hero").empty(),
            $("html").css("pointer-events", "");
        }, 1e3);
    },
  });
